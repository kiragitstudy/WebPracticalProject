@model WebPracticalProject.Service.Dto.PagedResult<WebPracticalProject.Service.Dto.InstrumentVm>
@{
  ViewData["Title"] = "Инструменты";
}
<div class="container py-4">
  <h1 class="h3 mb-4">Инструменты</h1>

  <div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 mb-3">Добавить инструмент</h2>
      <form asp-action="CreateInstrument" asp-controller="Admin" method="post" class="row g-3">
        @Html.AntiForgeryToken()
        <div class="col-md-6"><label class="form-label">Название</label><input name="Title" class="form-control" required /></div>
        <div class="col-md-3"><label class="form-label">Бренд</label><input name="Brand" class="form-control" /></div>
        <div class="col-md-3"><label class="form-label">Категория</label><input name="Category" class="form-control" /></div>
        <div class="col-md-6"><label class="form-label">Image URL</label><input name="ImageUrl" class="form-control" /></div>
        <div class="col-md-3">
          <label class="form-label">Цена/сутки, $</label>
          <input name="PricePerDay" type="number" step="0.01" class="form-control" required />
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="IsFeatured" id="f1" value="true">
          <label class="form-check-label" for="f1">Популярное</label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="IsActive" id="f2" value="true" checked>
          <label class="form-check-label" for="f2">Активен</label>
        </div>


        <div class="col-12"><label class="form-label">Описание</label><textarea name="Description" rows="3" class="form-control"></textarea></div>
        <div class="col-12"><button class="btn btn-primary" type="submit">Добавить</button></div>
      </form>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table align-middle">
      <thead><tr><th>Название</th><th>Бренд</th><th>Категория</th><th>Цена/сутки</th><th>Статус</th><th class="text-end">Действия</th></tr></thead>
      <tbody>
      @foreach (var i in Model.Items)
      {
        <tr>
          <td>@i.Title</td>
          <td>@(i.Brand ?? "—")</td>
          <td>@(i.Category ?? "—")</td>
          <td>@i.PricePerDay</td>
          <td>
            @if (i.IsActive) { <span class="badge bg-success text-bg-success">активен</span> } else { <span class="badge bg-secondary">скрыт</span> }
            @if (i.IsFeatured){ <span class="badge bg-info text-bg-info ms-1">popular</span> }
          </td>
          <td class="text-end">
            <form asp-action="UpdateInstrument" asp-controller="Admin" method="post" class="d-inline">
              @Html.AntiForgeryToken()
              <input type="hidden" name="id" value="@i.Id" />
              <input type="hidden" name="Title" value="@i.Title" />
              <input type="hidden" name="Brand" value="@i.Brand" />
              <input type="hidden" name="Category" value="@i.Category" />
              <input type="hidden" name="ImageUrl" value="@i.ImageUrl" />
              <input type="hidden" name="PricePerDay" value="@i.PricePerDay" />
              <input type="hidden" name="IsFeatured" value="@i.IsFeatured" />
              <input type="hidden" name="IsActive" value="@i.IsActive" />
              <button class="btn btn-sm btn-outline-primary" type="submit">Сохранить без изменений</button>
            </form>
            <form asp-action="DeleteInstrument" asp-controller="Admin" method="post" class="d-inline ms-2" onsubmit="return confirm('Удалить инструмент?')">
              @Html.AntiForgeryToken()
              <input type="hidden" name="id" value="@i.Id" />
              <button class="btn btn-sm btn-outline-danger" type="submit">Удалить</button>
            </form>
          </td>
        </tr>
      }
      </tbody>
    </table>
  </div>
</div>
